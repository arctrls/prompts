---
name: commit
description: "### 메시지 구조 규칙에 따라 변경사항/대화 맥락 기반으로 커밋 메시지를 생성하고 git commit 실행"
triggers:
  - commit
  - git commit
  - 커밋
argument-hint: "[--amend] [--push] [--no-verify]"
---

# Git 커밋 자동화 - $ARGUMENTS

현재 변경사항을 분석해 아래 규칙(### 메시지 구조)에 맞춰 커밋 메시지를 만들고 커밋을 실행합니다.

## 작업 프로세스

1. **변경사항 분석**
   - `git status`로 변경 파일 확인
   - `git diff --cached` 우선 확인 (스테이징 없음 시 `git diff`)
   - 변경 성격/범위 파악
   - 계획 문서가 있으면 실제 코드와 비교해 필요 시 갱신

2. **대화 맥락 분석**
   - 사용자 의도/배경/목적 반영
   - 의도가 불분명하면 질문 후 진행

3. **커밋 메시지 생성**
   - 의도 중심(무엇보다 왜)
   - 대화 맥락 반영
   - 사용자 관점 반영
   - `### 메시지 구조` 준수

4. **커밋 실행**
   - 필요 시 스테이징
   - 생성 메시지로 커밋
   - 실패 시 원인/에러 표시
   - `--push` 옵션이면 push까지 수행

5. **결과 출력**
   - 전체 커밋 메시지
   - 커밋 SHA
   - 파일 목록/변경 통계
   - push 결과(해당 시)

## 옵션

- `--amend`: 이전 커밋 수정
- `--push`: 커밋 후 자동 push
- `--no-verify`: pre-commit 훅 건너뛰기

## 의도 확인이 필요한 경우

- 변경 이유가 대화에서 명확하지 않을 때
- 여러 해석이 가능한 변경일 때
- 요구사항이 구체적이지 않을 때

질문 예시:
- "이 변경의 주요 목적이 무엇인가요?"
- "어떤 문제를 해결하려고 하셨나요?"
- "이 규칙을 추가한 배경이 궁금합니다"

## 커밋 메시지 규칙

### 작성 원칙

- 의도 중심, 맥락 반영, 사용자 관점
- 첫 줄은 50자 이내
- 한글 작성

### 타입

- `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`

### 메시지 구조

```text
type(scope): subject (50자 이내)

본문: 72자로 줄바꿈. 최대 3개의 항목만 기술
- 변경사항의 이유와 영향 설명
- 비즈니스 맥락 중심
- 한글로 의도가 드러나게 작성
```

## 주의사항

- 스테이징 파일이 없으면 전체 변경사항 스테이징
- 의도가 불명확하면 반드시 질문 후 진행
- `--push` 사용 시 원격 브랜치 상태 확인
